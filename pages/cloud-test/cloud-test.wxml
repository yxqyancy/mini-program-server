<!--pages/cloud-test/cloud-test.wxml-->
<view class="container">
  <view class="header">
    <text class="title">🔄 服务器连接测试</text>
    <text class="subtitle">测试图片和文件上传功能</text>
  </view>

  <!-- 测试按钮 -->
  <view class="test-buttons">
    <button class="test-btn" bindtap="testImageUpload">
      📷 测试图片上传
    </button>
    <button class="test-btn" bindtap="testFileUpload">
      📁 测试文件上传
    </button>
    <button class="clear-btn" bindtap="clearTestResults">
      🗑️ 清空测试结果
    </button>
  </view>

  <!-- 上传结果显示 -->
  <view class="upload-results" wx:if="{{uploadedImage || uploadedFile}}">
    <view class="result-section">
      <text class="section-title">📷 上传的图片</text>
      <view wx:if="{{uploadedImage}}" class="image-container">
        <image src="{{uploadedImage}}" mode="aspectFit" class="uploaded-image" bindtap="previewImage"/>
        <text class="image-url">{{uploadedImage}}</text>
      </view>
      <text wx:else class="no-data">暂无图片</text>
    </view>

    <view class="result-section">
      <text class="section-title">📁 上传的文件</text>
      <view wx:if="{{uploadedFile}}" class="file-container">
        <button class="download-btn" bindtap="downloadFile">📥 下载文件</button>
        <text class="file-url">{{uploadedFile}}</text>
      </view>
      <text wx:else class="no-data">暂无文件</text>
    </view>
  </view>

  <!-- 测试结果列表 -->
  <view class="test-results">
    <text class="section-title">📊 测试结果</text>
    <view class="result-list">
      <view class="result-item" wx:for="{{testResults}}" wx:key="index">
        <view class="result-header">
          <text class="result-name">{{item.name}}</text>
          <text class="result-status {{item.status.includes('✅') ? 'success' : 'error'}}">
            {{item.status}}
          </text>
        </view>
        <text class="result-message">{{item.message}}</text>
        <text class="result-time">{{item.time}}</text>
      </view>
    </view>
  </view>

  <!-- 使用说明 -->
  <view class="instructions">
    <text class="section-title">📋 使用说明</text>
    <view class="instruction-list">
      <text class="instruction-item">1. 点击"测试图片上传"选择并上传图片</text>
      <text class="instruction-item">2. 点击"测试文件上传"选择并上传文件</text>
      <text class="instruction-item">3. 查看测试结果和上传的文件</text>
      <text class="instruction-item">4. 如果测试失败，检查网络连接和服务器状态</text>
    </view>
  </view>
</view> 